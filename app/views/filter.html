{%- from "moj/components/filter/macro.njk" import mojFilter -%}
{% extends "layouts/main.html" %}

{% block pageTitle %}
  Content page template – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block beforeContent %}
  {{ govukBackLink({
    text: "Back",
    href: "javascript:window.history.back()"
  }) }}
{% endblock %}

{% block content %}

  <form class="form" action="/filter" method="post">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-third">
        {%- set filterOptionsHtml %}

          {{ govukInput({
            id: 'first-name',
            name: 'firstName',
            label: {
              text: 'First name',
              classes: 'govuk-label--m'
            },
            value: firstName
          }) }}

          {{ govukCheckboxes({
            idPrefix: 'types',
            name: 'types',
            classes: "govuk-checkboxes--small",
            fieldset: {
              legend: {
                text: 'Type',
                classes: 'govuk-fieldset__legend--m'
              }
            },
            items: types
          }) }}

        {% endset -%}

        {{ mojFilter({
          heading: {
            text: 'Filter'
          },

          submit: {
            attributes: {
              "data-test-id": "submit-button"
            }
          },

          selectedFilters: {
            heading: {
              text: 'Selected filters'
            },
            clearLink: {
              text: 'Clear filters',
              href: '/filter'
            },
            categories: [
              {
                heading: {
                text: 'Type'
              },
                items: typeFilterItems
              }
            ]
          },
          optionsHtml: filterOptionsHtml
        }) }}
      </div>
      <div class="govuk-grid-column-two-thirds">

        <h3 class="govuk-heading-s">
          {{ count }} results
        </h3>
        <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

        {% for result in results %}
          <h2 class="govuk-!-margin-bottom-1 govuk-!-font-weight-bold govuk-heading-m">{{ result.name }}</h2>
          <p>{{ result.niNumber }}</p>
          <p class="govuk-!-margin-bottom-1"><span class="govuk-!-font-weight-bold">Postcode: </span>{{ result.postcode }}</p>
          <p class="govuk-!-margin-bottom-1"><span class="govuk-!-font-weight-bold">IND Number: </span>{{ result.indNumber }}</p>
          <p class="govuk-!-margin-bottom-1"><span class="govuk-!-font-weight-bold">Benefit type ID: </span>{{ result.benefitTypeId }}</p>
          <p class="govuk-!-margin-bottom-1"><span class="govuk-!-font-weight-bold">IND debt balance: </span>£{{ result.indDebtBalance }}</p>
          <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">
        {% endfor %}
      </div>
    </div>
  </form>

{% endblock %}
